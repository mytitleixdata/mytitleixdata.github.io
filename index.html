<html lang="en">
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <!-- The above 3 meta tags *must* come first in the head; any other head content must come *after* these tags -->
    <title>My Title IX</title>


    <link href="styles/bootstrap.min.css" rel="stylesheet">
    <link href="styles/main.css" rel="stylesheet">

    <script src="https://code.createjs.com/tweenjs-0.6.2.min.js"></script>
    <script src="https://code.createjs.com/easeljs-0.8.2.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/1.18.5/TweenMax.min.js"></script>

    <link href="https://cdnjs.cloudflare.com/ajax/libs/select2/4.0.3/css/select2.min.css" rel="stylesheet" />

</head>
<body>

<div class="container">

<div class="">
    <ul  class="nav nav-pills">
        <li class="active"><a href="#search" data-toggle="tab">Search</a></li>
        <li><a href="#about" data-toggle="tab">About</a></li>
        <li><a href="#logic" data-toggle="tab">Logic Model</a></li>
    </ul>
</div>

    <div class="tab-content clearfix">
        <div class="tab-pane fade in active search-page" id="search">

            <h3>Search for your school</h3>

            <select id="searchbar">
                <option value="select">Select Your School</option>
                <option value="NE">North East 2011-2015</option>
                <option value="Emerson"">Emerson</option>
                <option value="school3">School 3</option>
            </select>

            <div class="school row" id="NE">
                <h3>North East Schools</h3>
                <div class="graph" id="NE1" style="height:400px; width:100%;"></div>
                
            </div>

            <div class="school row" id="Emerson">
                <h3>Emerson College</h3>

                <div class="graph col-sm-12 col-lg-6" id="Emerson1" style="height:400px; width:50%"></div>
                <div class="graph col-sm-12 col-lg-6" id="Emerson2" style="height:400px; width:100%;"></div>
                
                <div class="graph-info col-lg-12">
                    <h2>There could be text here...</h2>
                    <p>Hammock VHS migas normcore. Mumblecore activated charcoal meh scenester normcore. Gastropub etsy forage, authentic kitsch truffaut bushwick echo park portland farm-to-table ethical. Ramps fap farm-to-table, hammock freegan synth migas forage vinyl raclette. Glossier skateboard unicorn hell of fanny pack shabby chic, polaroid banh mi pok pok jianbing 90's kitsch sustainable. Flannel 90's chicharrones put a bird on it woke chambray, heirloom lyft XOXO iceland post-ironic next level normcore swag. Butcher XOXO cliche hot chicken, williamsburg cornhole selvage godard meh fixie edison bulb post-ironic +1 vegan.</p>
                </div>

            </div>

        </div>

        <div class="tab-pane fade about-page" id="about">

            <h3>About This Project</h3>
            <p>Hammock VHS migas normcore. Mumblecore activated charcoal meh scenester normcore. Gastropub etsy forage, authentic kitsch truffaut bushwick echo park portland farm-to-table ethical. Ramps fap farm-to-table, hammock freegan synth migas forage vinyl raclette. Glossier skateboard unicorn hell of fanny pack shabby chic, polaroid banh mi pok pok jianbing 90's kitsch sustainable. Flannel 90's chicharrones put a bird on it woke chambray, heirloom lyft XOXO iceland post-ironic next level normcore swag. Butcher XOXO cliche hot chicken, williamsburg cornhole selvage godard meh fixie edison bulb post-ironic +1 vegan.</p>
        </div>

        <div class="tab-pane fade logic-page" id="logic">
            <h3>Logic Model</h3>

            
        </div>
    </div>

</div>




<script src="js/jquery-1.11.3.min.js" type="text/javascript"></script>
<script src="js/bootstrap.min.js" type="text/javascript"></script>
<script src="js/underscore-min.js" type="text/javascript"></script>
<script src="https://code.highcharts.com/highcharts.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/select2/4.0.3/js/select2.min.js"></script>

<script>

$(function(){

    var loadJS = function(url, code, location){
        //url is URL of external file, implementationCode is the code
        //to be called from the file, location is the location to 
        //insert the <script> element
        var scriptTag = document.createElement('script');
        scriptTag.type = 'text/javascript';
        scriptTag.src = url;

        scriptTag.onload = code;
        scriptTag.onreadystatechange = code;

        location.appendChild(scriptTag);
    }
    var code = function(){
        console.log("script load successful");
    }
    

   $("#searchbar").select2();

    // pull up data for each school when selected
    $("#searchbar").change(function () {
        var school = '';
        var graphs;
        $("#searchbar option:selected").each(function() {

            if ($(this).attr('value') === 'select'){
                return;
            } else {
                // Find the select value and the graphs within it
                $('.school').hide();
                school = $(this).attr('value');
                $('#' + school).fadeIn().addClass('ACTIVE');
                graphs = $('#' + school).find('.graph');
                _.each(graphs, function(graph){
                    // Populate the graphs
                    var id = $(graph).attr('id');
                    showData(id);
                });
                
            }

        });
        

      })
      .change();


    function showData(id) {

        var url = 'js/' + id + '_graph.js';

        loadJS(url, code, document.body);

    };



});

</script>

</body>
</html>
